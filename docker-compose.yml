services:
  media-monitor:
    build: .
    container_name: media-monitor
    restart: unless-stopped
    ports:
      - "5000:5000"
    volumes:
      # Mount your media directory (read-only recommended)
      - /path/to/your/media:/watch:ro
      # Persistent config and database
      - ./config:/config
    environment:
      # Optional: Override defaults
      - WATCH_DIR=/watch
      - PORT=5000
      - MAX_WORKERS=4
      - STABILIZE_INTERVAL=10
      - STABILIZE_CHECKS=3
      
      # Optional: Set via environment instead of web UI
      # - NTFY_SERVER=https://ntfy.sh
      # - NTFY_TOPIC=my-media-notifications
      # - DISCORD_WEBHOOK=https://discord.com/api/webhooks/...
      # - TVDB_API_KEY=your-api-key
    
    # Optional: Resource limits
    # deploy:
    #   resources:
    #     limits:
    #       cpus: '2'
    #       memory: 1G
